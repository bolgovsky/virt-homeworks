# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."

---

Оговорка:
Пытаюсь сделать красиво - скопировать красивую структуры из github и править уже её. Задумался...
Если подскажете как это делать ПРАВИЛЬНО - буду благодарен )) даже если просто на НОРМАЛЬНЫЕ статьи ссылки))) 

Сразу извинюсь - тестирую: отдиктовано в 'Google Docs' и сконвертированно 'Docs to Markdonw'.
Если подскажите другие инструменты для ускорения рабочих процессов (особенно оформления документации- ДЗ например) - буду очень благодарен.

Соответственно появилось предупреждения об окончаниях:
```bash 
git add .
warning: LF will be replaced by CRLF in .idea/inspectionProfiles/profiles_settings.xml.
The file will have its original line endings in your working directory
```
Внес изменения, чтобы не выскакивали такие предупреждения:
```bash 
git config core.autocrlf true
```



## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.



 Ответ: разные уровни абстракции 


_* В чём разница при работе с ядром гостевой ОС для полной и паравиртуализации?_

1. При аппаратной виртуализации
    1. Гипервизор является сам операционной системой и ресурсами управляет сам, 
    2. эмулируем драйвера устройств в  гипервизоре, 
    3. можем выбирать практически любые ОС
    4. _* ядро гостевой ОС не модифицируется ("не знает" о виртуализации)_
2. При паравиртуализации 
   1. Гипервизор является как бы приложением в операционной системе хоста 
   2. операционная система хоста управляют уже аппаратными ресурсами 
   3. Драйвера соответственно из операционной системы хоста
   4. *_ядро гостевой ОС модифицируется дял запуска и взаимодействует с хостовой ОС ("знает" о виртуализации)_
3. При виртуализации на основе операционной системы
   1. гипервизор- приложение 
   2. Используется функция ядра ОС хоста
   3. Гостевая система - изолированная экземпляр ОС хоста с уникальным набором настроек 

---

## Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:

- физические сервера,

- паравиртуализация,

- виртуализация уровня ОС.

Условия использования:

- Высоконагруженная база данных, чувствительная к отказу.

- Различные web-приложения.

- Windows системы для использования бухгалтерским отделом.

- Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.


<table>
  <tr>
   <td>Условия использования
<p>
/
<p>
Организация серверов
   </td>
   <td>Высоконагруженная база данных, чувствительная к отказу
   </td>
   <td>Различные web-приложения
   </td>
   <td>Windows системы для использования бухгалтерским отделом.
   </td>
   <td>Системы, выполняющие высокопроизводительные расчеты на GPU
   </td>
  </tr>
  <tr>
   <td>физические сервера
   </td>
   <td>при должном подборе железа можно оптимально считать прямо на железе  (все будет нагружено), а масштабировать, добавляя ноды - в высокопроизводительный кластер, например, либо для отказоустойчивости,- в отказоустойчивый
   </td>
   <td>
   </td>
   <td>если есть аппаратные ключи разных вендоров, то скорее всего сюда
<p>
основное требование бухгалтерии “чтобы работало”
   </td>
   <td>при должном подборе железа можно оптимально считать прямо на железе  (все будет нагружено), а масштабировать, добавляя ноды
<p>
не надо пробрасывать ресурсы GPU
   </td>
  </tr>
  <tr>
   <td>паравиртуализация
   </td>
   <td>оптимальное задействование ресурсов,
<p>
масштабируемость, отказоустойчивость, гибкость в сценариях использования
<p>
при программно определяемых хранилищах потребуются ВСЕ ресурсы хоста: CPU для обеспечения I/O, ОЗУ- для кэша, сеть - для постоянного обмена данными, а сценарии конфигурации СУБД выбирать   по требованиям (улучшение отказоустойчивости/производительности)
   </td>
   <td>
   </td>
   <td>оптимальное задействование ресурсов,
<p>
масштабируемость, отказоустойчивость, 
<p>
проще и дешевле обслуживать и сопровождать + специфика бухгалтерии  такова , что почти 99% ПО делается под WIndows разных ревизий  и настроек, сюда же отнесем привычную среду для пользователей (RDS, Office и прочее)
<p>
НО (скорее всего) придется пробрасывать аппаратные ключи!
   </td>
   <td>оптимальное задействование ресурсов,
<p>
если ресурсов с запасом, то: не надо пробрасывать ресурсы GPU, считаем на железе хоста + в ОС  хоста остаются (хоть и не все) ресурсы хоста (CPU, ОЗУ, дисковое хранилище, сетевые интерфейсы), которые оптимальнее (пусть и сложнее) задействовать в виртуализации
   </td>
  </tr>
  <tr>
   <td>виртуализация уровня ОС
   </td>
   <td>
   </td>
   <td>в 90% случаев:
<p>
быстро разворачивается весь необходимый стек , 
<p>
легко масштабируется и переносится
   </td>
   <td>
   </td>
   <td>
   </td>
  </tr>
</table>


Честно говоря написал как думаю, ведь , на самом деле, все меняется, включая стандарты де-факто…

---

## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

_Здесь и далее считаем требования слева направо убывающими._

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.

_Мне кажется что для данного сценария отлично подойдёт как раз Microsoft Hyper-V. Причина - изначально уже есть Windows based инфраструктура (то есть уже есть лицензии, средства управления и прочее - будем значительно экономически выгодным вариантом ).  Скорее всего там же есть уже **System Center Configuration Manager(Microsoft Endpoint Manager) со всеми махровыми плюшками.**_

2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.

_KVM - производительное, бесплатное и подойдет для такого количества виртуальных машин с разными ОС. _Наиболее производительное _тут понятие относительное._ 

3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.

_Free Windows Hyper-V Server - приходит на ум потому что есть из коробки почти все плюшки  стандартного Hyper-V и отличная совместимость._

4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

_VirtualBox - один из лидеров для этих целей, в связке с vagrant и другими инструментами дает просто огромные возможности для тестирования ПО._ 

---

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

* _повышенные расходы на лицензирование, поддержку, сопровождение и обслуживание - экономически менее выгодная модель._ Решение - просчитывать точно экономическую целесообразность использования нескольких систем управления виртуализацией _
* _высокая стоимость компетентных специалистов гетерогенной среды виртуализации  либо значительно увеличенный штат специалистов под конкретные среды виртуализации, либо какой-то нереальный вариант сопровождения) .  _Решение: хорошее планирование внедрения и обучения специалистов. То есть на этапе внедрения нужны высококвалифицированных специалистов гетерогенной среды виртуализации , которые подтянут остальных__
* _дополнительные накладные расходы на масштабирование в сторону одного или другого гипервизора (смена модели использования 50/50 на 20/80) - переконвертирование образов, передача и сохранность, необходимость дополнительного тестирования целесообразности и прочее. _Решение: Либо закладываться на разработку собственных продуктов для этого , Либо брать коммерческие продукты и использовать__


В любом случае, на этапе создания, я бы максимально старался не использовать разнородную гетерогенную среду управление виртуализацией, а использовать “моно” среду чтобы сократить экономические издержки и упростить процессы внедрения и дальнейшего обслуживания (обеспечения жизненного цикла работы) , по крайней мере,  в продакшене.

В тестовой среде, конечно, было бы неплохо использовать гетерогенную среду для оценки производительности и дополнительных преимуществ , которые появляются и могут быть полезны в будущем для стратегического планирования применения и развития в компании.


В дальнейшем уже, как результат развития и компромиссов, гетерогенность появится.
